<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Kena Mental Wish Simulator</title>
    <link rel="icon" type="image/x-icon" href="imagegacha/brand.png">
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
      window.MathJax = {
        tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }
      };
   </script>
<style type="text/css">
    @font-face {
    font-family: 'Genshin'; /* Give your font a name */
    src: url('fonts/optimized_global_web.woff2') format('woff2'); /* Path to your .woff file */
    font-weight: normal; /* Adjust as needed */
    font-style: normal; /* Adjust as needed */
}

/* Example usage */
h1, label, select, option, button {
    font-family: 'Genshin', sans-serif; /* Use the font */
}
    

body {
     background-image: url('imagegacha/wish-background.webp'); /* Replace with your image path */
     background-size: cover; /* Makes the background cover the entire page */
     background-position: center; /* Centers the background image */
     background-repeat: no-repeat; /* Prevents the background from repeating */
     background-attachment: fixed;
     height: 100vh; /* Ensures the body takes up the full viewport height */
     
 } 

body {
    margin: 20px; /* Set margin around the body */
}
.roll-button {
    position: fixed;    /* Keep it fixed in place */
    bottom: 20px;      /* Adjust as needed for spacing from the bottom */
    right: 20px;       /* Adjust as needed for spacing from the right */
    background-color: transparent;
    background-image: url('imagegacha/button.webp'); /* Replace with your image path */
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    width: 230px;
    aspect-ratio: 355/88;
    color: #4a5265 ;
    text-shadow: 0 0 3px rgba(0,0,0,.5);
    display: inline-flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;

    border: none;  
    outline: none; 
}


.hidden {
    display: none;
}


/* Show Answer button style */
.toggle-button {
    border: 3.5px solid transparent;
    border-radius: 50px;
    background-color: #e0ddd4;
    box-shadow: 0 2px 2px #64646433,0 2px 2px #64646430;
    padding: .25rem 1.5rem;
    margin: 2px 5px;
    font-size: 90%;
    width: 180px;
}
.bottomleft1-button {
    position: fixed;    /* Keep it fixed in place */
    bottom: 20px;      /* Adjust as needed for spacing from the bottom */
    left: 20px;       /* Adjust as needed for spacing from the right */
}

.bottomleft2-button {
    position: fixed;    /* Keep it fixed in place */
    bottom: 20px;      /* Adjust as needed for spacing from the bottom */
    left: 240px;       /* Adjust as needed for spacing from the right */
}

.result-section {
    background-color: transparent;
    background-image: url('imagegacha/gacha-bg.webp'); /* Replace with your image path */
    background-position: center;
    background-size: 100%;   /* Adjust to cover the entire section */
    width: 500px;
    aspect-ratio: 1054/1054;

    margin: auto;
    transform: translateX(50%);
    padding: 20px;            /* Add some padding for better readability */
    

    
    z-index: 1;               /* Optional: ensure it appears above other content */
    display: inline-flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
}

#answer {
    position: fixed;       /* Fix the position relative to the viewport */
    right: 20px;           /* Distance from the right side of the screen */
    top: 50%;              /* Center it vertically */
    transform: translateY(-50%); /* Vertically center the div */
    width: 300px;          /* Set the width of the textbox */
    height: auto;          /* Height will adjust based on content */
    padding: 20px;         /* Add some padding for spacing */
    background-color: #f9f9f9; /* Light background for textbox effect */
    border: 2px solid #ccc; /* Border to give it a textbox-like appearance */
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1); /* Optional: Add shadow for depth */
    z-index: 2;            /* Ensure it appears above other content */
    overflow-y: auto;      /* Scroll if content exceeds the height */
    font-size: 16px;       /* Adjust font size */
    display: none;         /* Initially hidden */
}

/* When the answer is visible, toggle the display */
#answer.visible {
    display: block;
}

</style>
</head>
<body>

    <h1>Wanderlust Invocation</h1>

    <p>
        <label for="level">Select type:</label>
        <select id="level">
            <option value="1">Factorization</option>
            <option value="2">Recurrence formula</option>
            <option value="3">Limits</option>
            <option value="4">Integrals</option>
        </select>
    </p>

    <p>
        <label for="type">Select level:</label>
        <select id="type">
            <option value="A">Level 1 <span style="color:yellow;">&starf;&starf;</span></option>
            <option value="B">Level 2 <span style="color:yellow;">&starf;&starf;&starf;</span></option>
            <option value="C">Level 3 <span style="color:yellow;">&starf;&starf;&starf;&starf;</span></option>
            <option value="D">Level 4 <span style="color:yellow;">&starf;&starf;&starf;&starf;&starf;</span></option>
        </select>
    </p>

    <button id="rollButton" class="roll-button" onclick="gachaRoll()">Wish Ã—1</button>

    <div id="result" class="hidden result-section"></div>
    
   

    <div id="answer" class="hidden"></div> 


 <button id="toggleButton" class="toggle-button hidden bottomleft1-button" onclick="toggleAnswer()">Show me Da Wei</button>

<a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">
<button id="give-up" class="toggle-button hidden bottomleft2-button">I give up!</button>
</a>


    <script src="/indominusrex/gacha-items.js"></script>

<script>
    let items = {}; // This will store the gacha items

    // Assuming gachaItems is defined in gacha-items.js
    // You can directly assign it to the items variable
    items = gachaItems; // Assuming gachaItems is available in the global scope

    // Gacha roll function
    function gachaRoll() {
        const selectedLevel = document.getElementById('level').value;
        const selectedType = document.getElementById('type').value;

        if (items[selectedLevel] && items[selectedLevel][selectedType]) {
            const selectedItems = items[selectedLevel][selectedType];
            const itemKeys = Object.keys(selectedItems); // Get the keys (math expressions)
            const randomIndex = Math.floor(Math.random() * itemKeys.length); // Randomly pick one
            const resultKey = itemKeys[randomIndex]; // Get the selected key (math expression)
            const resultValue = selectedItems[resultKey]; // Get the corresponding value (explanation)

            // Split the resultValue to separate the explanation if it includes a colon
            const answerParts = resultValue.split(":");
            const explanation = answerParts.length > 1 ? answerParts[1].trim() : resultValue; // Get the explanation after the colon

            // Display the formula and explanation in separate sections
            document.getElementById('result').classList.remove('hidden');
            document.getElementById('result').innerHTML = `<p style="font-size:20px; text-align: center;">${resultKey}</p>`;
            document.getElementById('answer').innerHTML = explanation; // Use the explanation derived from the resultValue

            // Show the "Toggle Answer" button
            document.getElementById('toggleButton').classList.remove('hidden');
            document.getElementById('give-up').classList.remove('hidden');
            document.getElementById('toggleButton').textContent = "Show me Da Wei";

            // Hide the answer by default
            document.getElementById('answer').classList.add('hidden');  // Hides the answer box
            document.getElementById('answer').classList.remove('visible');  // Ensures the answer box is not visible

            // Ensure MathJax is triggered to render LaTeX
            MathJax.typesetPromise();
        } else {
            document.getElementById('result').textContent = "No items found for this selection.";
        }
    }

    // Function to toggle the answer visibility
    function toggleAnswer() {
    const answerDiv = document.getElementById('answer');
    const toggleButton = document.getElementById('toggleButton');

    if (answerDiv.classList.contains('hidden')) {
        answerDiv.classList.remove('hidden');  // Show the answer
        answerDiv.classList.add('visible');    // Add the visible class for styling
        toggleButton.textContent = "Go a Wei"; // Update button text
    } else {
        answerDiv.classList.add('hidden');     // Hide the answer
        answerDiv.classList.remove('visible'); // Remove the visible class
        toggleButton.textContent = "Show me Da Wei"; // Update button text
    }

    // Reprocess MathJax for any LaTeX content
    MathJax.typesetPromise(); // Ensure MathJax renders the LaTeX
}
</script>



</body>
</html>
