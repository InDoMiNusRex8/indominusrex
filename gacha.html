<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genshin Impact Wish Simulator</title>
    <link rel="icon" type="image/x-icon" href="imagegacha/brand.png">
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
      window.MathJax = {
        tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] }
      };
   </script>
<style type="text/css">
    @font-face {
    font-family: 'Genshin'; /* Give your font a name */
    src: url('fonts/optimized_global_web.woff2') format('woff2'); /* Path to your .woff file */
    font-weight: normal; /* Adjust as needed */
    font-style: normal; /* Adjust as needed */
}

/* Example usage */
h1, label, select, option, button {
    font-family: 'Genshin', sans-serif; /* Use the font */
}
    

/* body {
    /* background-image: url('imagegacha/wish-background.webp'); /* Replace with your image path */
    /* background-size: cover; /* Makes the background cover the entire page */
    /* background-position: center; /* Centers the background image */
    /* background-repeat: no-repeat; /* Prevents the background from repeating */
    /* height: 100vh; /* Ensures the body takes up the full viewport height */
    /* margin: 0; /* Removes default margin */ 
/* } */

body {
    margin: 20px; /* Set margin around the body */
}
.roll-button {
    background-image: url('imagegacha/button.png'); /* Replace with your image path */
    background-size: cover; /* Adjusts the background to cover the entire button */
    background-repeat: no-repeat; /* Prevents the background from repeating */
    display: flex;
    align-items: center;
    justify-content: center;
    border: none; /* Remove default border */
    width: 355px; /* Set desired width */
    height: 88px; /* Adjust height automatically */
    margin: 0 auto; /* Center the image horizontally */
    cursor: pointer; /* Change cursor to pointer on hover */
    color: black; /* Change text color (if any) */
    font-size: 16px; /* Set font size */
}


.hidden {
    display: none;
}


/* Show Answer button style */
.toggle-button {
    position: relative;
    border: 3.5px solid transparent;
    border-radius: 50px;
    background-color: #e0ddd4;
    box-shadow: 0 2px 2px #64646433,0 2px 2px #64646430;
    padding: .25rem 1.5rem;
    margin: 2px 5px;
    border: solid transparent;
    font-size: 90%
}

</style>
</head>
<body>

    <h1>Wanderlust Invocation</h1>

    <p>
        <label for="level">Select type:</label>
        <select id="level">
            <option value="1">Factorization</option>
            <option value="2">Recurrence formula</option>
            <option value="3">Limits</option>
            <option value="4">Integrals</option>
        </select>
    </p>

    <p>
        <label for="type">Select level:</label>
        <select id="type">
            <option value="A">Level 1 <span style="color:yellow;">&starf;&starf;</span></option>
            <option value="B">Level 2 <span style="color:yellow;">&starf;&starf;&starf;</span></option>
            <option value="C">Level 3 <span style="color:yellow;">&starf;&starf;&starf;&starf;</span></option>
            <option value="D">Level 4 <span style="color:yellow;">&starf;&starf;&starf;&starf;&starf;</span></option>
        </select>
    </p>

    <button id="rollButton" class="roll-button" onclick="gachaRoll()">Wish Ã—1</button>

    <div id="result"></div>
    
    <button id="toggleButton" class="toggle-button hidden" onclick="toggleAnswer()">Show me Da Wei</button>

    <div id="answer" class="hidden"></div>





    <script src="/indominusrex/gacha-items.js"></script>

<script>
    let items = {}; // This will store the gacha items

    // Assuming gachaItems is defined in gacha-items.js
    // You can directly assign it to the items variable
    items = gachaItems; // Assuming gachaItems is available in the global scope

    // Gacha roll function
    function gachaRoll() {
        const selectedLevel = document.getElementById('level').value;
        const selectedType = document.getElementById('type').value;

        if (items[selectedLevel] && items[selectedLevel][selectedType]) {
            const selectedItems = items[selectedLevel][selectedType];
            const itemKeys = Object.keys(selectedItems); // Get the keys (math expressions)
            const randomIndex = Math.floor(Math.random() * itemKeys.length); // Randomly pick one
            const resultKey = itemKeys[randomIndex]; // Get the selected key (math expression)
            const resultValue = selectedItems[resultKey]; // Get the corresponding value (explanation)

            // Split the resultValue to separate the explanation if it includes a colon
            const answerParts = resultValue.split(":");
            const explanation = answerParts.length > 1 ? answerParts[1].trim() : resultValue; // Get the explanation after the colon

            // Display the formula and explanation in separate sections
            document.getElementById('result').innerHTML = `<p style="font-size:20px; text-align: center;">${resultKey}</p>`;
            document.getElementById('answer').innerHTML = explanation; // Use the explanation derived from the resultValue

            // Show the "Toggle Answer" button
            document.getElementById('toggleButton').classList.remove('hidden');
            document.getElementById('toggleButton').textContent = "Show me Da Wei";

            // Hide the answer by default
            document.getElementById('answer').classList.add('hidden');

            // Ensure MathJax is triggered to render LaTeX
            MathJax.typesetPromise();
        } else {
            document.getElementById('result').textContent = "No items found for this selection.";
        }
    }

    // Function to toggle the answer visibility
    function toggleAnswer() {
        const answerDiv = document.getElementById('answer');
        const toggleButton = document.getElementById('toggleButton');

        if (answerDiv.classList.contains('hidden')) {
            answerDiv.classList.remove('hidden'); // Show answer
            toggleButton.textContent = "Go a Wei"; // Change button text to "Hide Answer"
        } else {
            answerDiv.classList.add('hidden'); // Hide answer
            toggleButton.textContent = "Show me Da Wei"; // Change button text to "Show Answer"
        }

        // Reprocess MathJax for any LaTeX content
        MathJax.typesetPromise(); // This triggers MathJax to reprocess any LaTeX in the answer section
    }
</script>



</body>
</html>
